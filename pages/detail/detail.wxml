<view class="container">
  <view class="detail-header">
    <view class="header-icon">
      <text class="iconfont">ğŸ“Œ</text>
    </view>
    <view class="detail-tag {{task.type}}">{{task.typeName}}</view>
  </view>

  <view class="detail-card card">
    <view class="card-row">
      <text class="row-label">åˆ›å»ºæ—¶é—´</text>
      <text class="row-value">{{task.createTime}}</text>
    </view>
    <view class="card-row">
      <text class="row-label">æ‰“å¡é¢‘ç‡</text>
      <text class="row-value">{{task.typeName}}</text>
    </view>
    <view class="card-row">
      <text class="row-label">æ€»æ‰“å¡æ¬¡æ•°</text>
      <text class="row-value text-primary">{{task.totalCount || 0}} æ¬¡</text>
    </view>
    <view class="card-row">
      <text class="row-label">è¿ç»­æ‰“å¡</text>
      <text class="row-value text-primary">{{task.streakDays || 0}} å¤©</text>
    </view>
  </view>

  <view class="action-bar">
    <button class="btn-checkin {{task.checkedToday ? 'checked' : ''}}" bindtap="doCheckin">
      {{task.checkedToday ? 'ä»Šæ—¥å·²æ‰“å¡' : 'ç«‹å³æ‰“å¡'}}
    </button>
    <!--button class="btn-delete" bindtap="deleteTask">åˆ é™¤æ‰“å¡</button-->
  </view>

  <view class="history-section">
    <view class="section-title">
      <text>æ‰“å¡è®°å½•</text>
      <text class="record-count">å…± {{recordList.length}} æ¡</text>
    </view>
    <view class="record-list">
      <block wx:for="{{recordList}}" wx:key="_id">
        <view class="record-item">
          <view class="record-date">
            <text class="date-day">{{item.day}}</text>
            <text class="date-month">{{item.month}}</text>
          </view>
          <view class="record-info">
            <text class="record-time">{{item.time}}</text>
            <text class="record-note">{{item.note || 'æ— å¤‡æ³¨'}}</text>
          </view>
        </view>
      </block>
      <view wx:if="{{recordList.length === 0}}" class="empty-records">
        <text>æš‚æ— æ‰“å¡è®°å½•</text>
      </view>
    </view>
  </view>
</view>